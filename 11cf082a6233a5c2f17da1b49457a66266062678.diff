diff --git a/docs/libnm/Makefile.am b/docs/libnm/Makefile.am
index ded32f8218da7f1045c48f5d75f8995b76e4f5e0..20dc8de5718bbbbb9cade32f20f3d2ad44752ffd 100644
--- a/docs/libnm/Makefile.am
+++ b/docs/libnm/Makefile.am
@@ -18,10 +18,8 @@ DOC_SOURCE_DIR= \
 	$(top_srcdir)/libnm \
 	$(top_builddir)/libnm
 
-decorators := $(shell $(top_srcdir)/tools/decorators.sh $(top_srcdir)/libnm-core/nm-version.h)
-
 # Extra options to supply to gtkdoc-scan.
-SCAN_OPTIONS=--rebuild-types --rebuild-sections --ignore-decorators "$(decorators)"
+SCAN_OPTIONS=--rebuild-types --rebuild-sections --ignore-decorators="NM_AVAILABLE_IN_\d_\d\d?|NM_DEPRECATED_IN_\d_\d\d?"
 
 # Extra options to supply to gtkdoc-mkdb.
 MKDB_OPTIONS=--sgml-mode --output-format=xml
diff --git a/docs/libnm/meson.build b/docs/libnm/meson.build
index 3403b339d7169c97848a80aaeb9fa8a9d3203ec2..b4a23729bbb40a39cf24f4e10bb7e0456e4427e2 100644
--- a/docs/libnm/meson.build
+++ b/docs/libnm/meson.build
@@ -32,9 +32,6 @@ configure_file(
   configuration: version_conf,
 )
 
-result = run_command(join_paths(meson.source_root(), 'tools', 'decorators.sh'),
-                     join_paths(meson.source_root(), 'libnm-core', 'nm-version.h'))
-
 gnome.gtkdoc(
   doc_module,
   main_xml: doc_module + '-docs.xml',
@@ -46,7 +43,7 @@ gnome.gtkdoc(
   scan_args: [
     '--rebuild-types',
     '--rebuild-sections',
-    '--ignore-decorators=' + result.stdout().strip(),
+    '--ignore-decorators=NM_AVAILABLE_IN_\d_\d\d?|NM_DEPRECATED_IN_\d_\d\d?',
     '--ignore-headers=' + ' '.join(private_headers),
   ],
   scanobjs_args: '--type-init-func="g_type_init();"',
